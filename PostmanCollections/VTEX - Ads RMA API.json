{
  "_": {
    "postman_id": "1120f52c-8870-492c-9e99-8c650cabcafb"
  },
  "item": [
    {
      "id": "bcfd5b24-88f7-41c1-9ecf-f7768375554e",
      "name": "Retrieving Ads",
      "description": {
        "content": "",
        "type": "text/plain"
      },
      "item": [
        {
          "id": "495e88bb-ac11-4462-a060-a9a910f8e7b2",
          "name": "Get ads",
          "request": {
            "name": "Get ads",
            "description": {
              "content": "Retrieve Product and Banner ad formats based on context and placements.",
              "type": "text/plain"
            },
            "url": {
              "path": [
                "v1",
                "rma",
                ":publisher_id"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": [
                {
                  "disabled": false,
                  "description": {
                    "content": "(Required) Publisher identifier provided by your account manager",
                    "type": "text/plain"
                  },
                  "type": "any",
                  "value": "0d675bf6-03f6-4b81-9617-e79dffddc3ab",
                  "key": "publisher_id"
                }
              ]
            },
            "header": [
              {
                "disabled": false,
                "description": {
                  "content": "(Required) Type of the content being sent.",
                  "type": "text/plain"
                },
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "disabled": false,
                "description": {
                  "content": "(Required) HTTP Client Negotiation Accept Header. Indicates the types of responses the client can understand.",
                  "type": "text/plain"
                },
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "POST",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"session_id\": \"f361661f5986477990092a34562f18347\",\n  \"context\": \"search\",\n  \"placements\": {\n    \"placementName1\": {\n      \"quantity\": 1,\n      \"size\": \"desktop\",\n      \"types\": [\n        \"banner\"\n      ]\n    },\n    \"placementName2\": {\n      \"quantity\": 2,\n      \"size\": \"mobile\",\n      \"types\": [\n        \"product\"\n      ]\n    }\n  },\n  \"user_id\": \"6a746448cf5942bcaa3da426844ad115\",\n  \"store_id\": \"1\",\n  \"term\": \"desodorante\",\n  \"category_name\": \"Daily Care > Deodorant > Spray\",\n  \"product_sku\": \"12345\",\n  \"brand_name\": \"Nivea\",\n  \"product_attributes\": {\n    \"category_name\": \"Daily Care > Deodorant > Spray\",\n    \"brand_name\": \"Dove\"\n  },\n  \"channel\": \"site\",\n  \"device_id\": \"screen identifier\",\n  \"userAgent\": \"App/1.0 (Pixel 6; Android 12.0)\",\n  \"tags\": [\n    \"Mega Maio\"\n  ],\n  \"skus\": [\n    \"12345\",\n    \"67890\"\n  ],\n  \"dedup_campaign_ads\": false,\n  \"dedup_ads\": false,\n  \"segmentation\": [\n    {\n      \"key\": \"STATE\",\n      \"values\": [\n        \"RJ\"\n      ]\n    },\n    {\n      \"key\": \"CITY\",\n      \"values\": [\n        \"Rio de Janeiro\"\n      ]\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "headerFamily": "json",
                  "language": "json"
                }
              }
            }
          },
          "response": [
            {
              "_": {
                "postman_previewlanguage": "json"
              },
              "id": "8c42a7a5-0680-42db-8429-2ad2f9ad35e6",
              "name": "OK",
              "originalRequest": {
                "url": {
                  "path": [
                    "v1",
                    "rma",
                    ":publisher_id"
                  ],
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "query": [],
                  "variable": []
                },
                "header": [
                  {
                    "disabled": false,
                    "description": {
                      "content": "(Required) Type of the content being sent.",
                      "type": "text/plain"
                    },
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "disabled": false,
                    "description": {
                      "content": "(Required) HTTP Client Negotiation Accept Header. Indicates the types of responses the client can understand.",
                      "type": "text/plain"
                    },
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "method": "POST",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"session_id\": \"f361661f5986477990092a34562f18347\",\n  \"context\": \"search\",\n  \"placements\": {\n    \"placementName1\": {\n      \"quantity\": 1,\n      \"size\": \"desktop\",\n      \"types\": [\n        \"banner\"\n      ]\n    },\n    \"placementName2\": {\n      \"quantity\": 2,\n      \"size\": \"mobile\",\n      \"types\": [\n        \"product\"\n      ]\n    }\n  },\n  \"user_id\": \"6a746448cf5942bcaa3da426844ad115\",\n  \"store_id\": \"1\",\n  \"term\": \"desodorante\",\n  \"category_name\": \"Daily Care > Deodorant > Spray\",\n  \"product_sku\": \"12345\",\n  \"brand_name\": \"Nivea\",\n  \"product_attributes\": {\n    \"category_name\": \"Daily Care > Deodorant > Spray\",\n    \"brand_name\": \"Dove\"\n  },\n  \"channel\": \"site\",\n  \"device_id\": \"screen identifier\",\n  \"userAgent\": \"App/1.0 (Pixel 6; Android 12.0)\",\n  \"tags\": [\n    \"Mega Maio\"\n  ],\n  \"skus\": [\n    \"12345\",\n    \"67890\"\n  ],\n  \"dedup_campaign_ads\": false,\n  \"dedup_ads\": false,\n  \"segmentation\": [\n    {\n      \"key\": \"STATE\",\n      \"values\": [\n        \"RJ\"\n      ]\n    },\n    {\n      \"key\": \"CITY\",\n      \"values\": [\n        \"Rio de Janeiro\"\n      ]\n    }\n  ]\n}",
                  "options": {
                    "raw": {
                      "headerFamily": "json",
                      "language": "json"
                    }
                  }
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"placementName1\": [\n    {\n      \"ad_id\": \"6d2d8837-bf5a-4ba4-90d2-5546cb18d5ce\",\n      \"media_url\": \"https://cdn.newtail.com.br/retail_media/ads/2023/05/03/f97a938660e56fe38a9c9ade21c27df8-1280x256-red.png\",\n      \"destination_url\": null,\n      \"type\": \"banner\",\n      \"click_url\": \"https://newtail-media.newtail.com.br/v1/beacon/click/6d2d8837-bf5a-4ba4-90d2-5546cb18d5ce?publisher_id=0d675bf6-03f6-4b81-9617-e79dffddc3ab&ad_type=banner\",\n      \"impression_url\": \"https://newtail-media.newtail.com.br/v1/beacon/impression/6d2d8837-bf5a-4ba4-90d2-5546cb18d5ce?publisher_id=0d675bf6-03f6-4b81-9617-e79dffddc3ab&ad_type=banner\",\n      \"view_url\": \"https://newtail-media.newtail.com.br/v1/beacon/view/6d2d8837-bf5a-4ba4-90d2-5546cb18d5ce?publisher_id=0d675bf6-03f6-4b81-9617-e79dffddc3ab&ad_type=banner\"\n    }\n  ],\n  \"placementName2\": [\n    {\n      \"ad_id\": \"846fbf5e-6980-4a5e-a4a1-9b2a2dcbafb7\",\n      \"product_sku\": \"10001236\",\n      \"type\": \"product\",\n      \"click_url\": \"https://newtail-media.newtail.com.br/v1/beacon/click/846fbf5e-6980-4a5e-a4a1-9b2a2dcbafb7?publisher_id=0d675bf6-03f6-4b81-9617-e79dffddc3ab&ad_type=product\",\n      \"impression_url\": \"https://newtail-media.newtail.com.br/v1/beacon/impression/846fbf5e-6980-4a5e-a4a1-9b2a2dcbafb7?publisher_id=0d675bf6-03f6-4b81-9617-e79dffddc3ab&ad_type=product\",\n      \"view_url\": \"https://newtail-media.newtail.com.br/v1/beacon/view/846fbf5e-6980-4a5e-a4a1-9b2a2dcbafb7?publisher_id=0d675bf6-03f6-4b81-9617-e79dffddc3ab&ad_type=product\"\n    }\n  ]\n}",
              "cookie": []
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a19379a2-fd49-48a9-88d8-cda92da64690",
                "type": "text/javascript",
                "exec": [
                  "// Validate status 2xx \npm.test(\"[POST]::/v1/rma/:publisher_id - Status code is 2xx\", function () {\n   pm.response.to.be.success;\n});\n",
                  "// Validate if response header has matching content-type\npm.test(\"[POST]::/v1/rma/:publisher_id - Content-Type is application/json\", function () {\n   pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\n});\n",
                  "// Validate if response has JSON Body \npm.test(\"[POST]::/v1/rma/:publisher_id - Response has JSON Body\", function () {\n    pm.response.to.have.jsonBody();\n});\n",
                  "// Response Validation\nconst schema = {\"type\":\"object\",\"additionalProperties\":{\"type\":\"array\",\"description\":\"List of ads for a specific placement.\",\"items\":{\"type\":\"object\",\"properties\":{\"ad_id\":{\"type\":\"string\",\"description\":\"Unique identifier of the ad.\"},\"media_url\":{\"type\":\"string\",\"description\":\"URL of the image to be displayed.\"},\"destination_url\":{\"type\":[\"string\",\"null\"],\"description\":\"Destination URL of the ad (not all ads have a destination).\"},\"type\":{\"type\":\"string\",\"description\":\"Type of ad.\",\"enum\":[\"banner\",\"product\",\"sponsored_brand\"]},\"seller_id\":{\"type\":[\"string\",\"null\"],\"description\":\"Identifier of the seller.\"},\"click_url\":{\"type\":\"string\",\"description\":\"URL of the click event beacon for the ad.\"},\"impression_url\":{\"type\":\"string\",\"description\":\"URL of the impression event beacon for the ad.\"},\"view_url\":{\"type\":\"string\",\"description\":\"URL of the view event beacon for the ad.\"},\"product_sku\":{\"type\":\"string\",\"description\":\"Product identifier. Present when ad type is 'product'.\"},\"product_name\":{\"type\":\"string\",\"description\":\"Product name. Present when ad type is 'product'.\"}}}}}\n\n// Validate if response matches JSON schema \npm.test(\"[POST]::/v1/rma/:publisher_id - Schema is valid\", function() {\n    pm.response.to.have.jsonSchema(schema,{unknownFormats: [\"int32\", \"int64\", \"float\", \"double\"]});\n});\n"
                ]
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          }
        }
      ],
      "event": []
    }
  ],
  "event": [],
  "variable": [
    {
      "type": "any",
      "value": "https://newtail-media.newtail.com.br",
      "key": "baseUrl"
    }
  ],
  "info": {
    "_postman_id": "1120f52c-8870-492c-9e99-8c650cabcafb",
    "name": "VTEX Ads - RMA API",
    "version": {
      "raw": "1.0.0",
      "major": 1,
      "minor": 0,
      "patch": 0,
      "prerelease": [],
      "build": [],
      "string": "1.0.0"
    },
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": {
      "content": "API for retrieving ads in VTEX Ads Retail Media.",
      "type": "text/plain"
    }
  }
}