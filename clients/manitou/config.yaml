client: manitou
specsDir: ../..
outputDir: output

defaults:
  openapiVersion: "3.0.3"
  removeFalsePathParams: true
  ensureOperationId: true
  removeParams:
    - name: Accept
      in: header
    - name: Content-Type
      in: header
    - name: accountName
      in: path
    - name: environment
      in: path
  descriptionNote: "Requests with a body must be sent with `Content-Type: application/json`."

specs:
  # ── Catalog API (split into 3 sub-specs by prefix) ──
  - source: "VTEX - Catalog API.json"
    split:
      - prefix: /api/catalog/
        outputName: catalog.catalog
        title: "Catalog API (Catalog)"
      - prefix: /api/catalog_system/
        outputName: catalog.catalog_system
        title: "Catalog API (Catalog System)"
      - prefix: /api/addon/
        outputName: catalog.addon
        title: "Catalog API (Addon)"

  # ── Catalog Seller Portal ──
  - source: "VTEX - Catalog API Seller Portal.json"
    outputName: catalog-seller-portal
    removePaths:
      - /api/catalog-seller-portal/products/{param}

  # ── Checkout API ──
  - source: "VTEX - Checkout API.json"
    outputName: checkout

  # ── Customer Credit API ──
  - source: "VTEX - Customer Credit API.json"
    outputName: customer-credit

  # ── Logistics API ──
  - source: "VTEX - Logistics API.json"
    outputName: logistics

  # ── Marketplace APIs ──
  - source: "VTEX - Marketplace APIs.json"
    outputName: marketplace

  # ── Marketplace APIs - Sent Offers ──
  - source: "VTEX - Marketplace APIs - Sent Offers.json"
    outputName: marketplace-sent-offers

  # ── Marketplace APIs - Suggestions ──
  - source: "VTEX - Marketplace APIs - Suggestions.json"
    outputName: marketplace-suggestions

  # ── Marketplace Protocol - External Seller Fulfillment ──
  - source: "VTEX - Marketplace Protocol - External Seller Fulfillment.json"
    outputName: marketplace-protocol-seller-fulfillment

  # ── Marketplace Protocol - External Seller Marketplace ──
  - source: "VTEX - Marketplace Protocol - External Seller Marketplace.json"
    outputName: marketplace-protocol-seller-marketplace

  # ── Marketplace Protocol - External Marketplace Orders ──
  - source: "VTEX - Marketplace Protocol - External Marketplace Orders.json"
    outputName: marketplace-protocol-marketplace-orders

  # ── MasterData v1 (remove duplicate CL/AD paths) ──
  - source: "VTEX - MasterData API - v10.2.json"
    outputName: masterdata-v1
    removePaths:
      - /api/dataentities/CL/documents
      - /api/dataentities/CL/documents/{id}
      - /api/dataentities/AD/documents
      - /api/dataentities/AD/documents/{id}

  # ── Master Data v2 ──
  - source: "VTEX - Master Data API - v2.json"
    outputName: masterdata-v2

  # ── Orders API (split into 4 sub-specs by prefix) ──
  - source: "VTEX - Orders API.json"
    split:
      - prefix: /api/oms/
        outputName: orders.oms
        title: "Orders API (OMS)"
      - prefix: /api/orders/
        outputName: orders.orders
        title: "Orders API (Orders)"
      - prefix: /api/order-system/
        outputName: orders.order-system
        title: "Orders API (Order System)"
      - prefix: /api/checkout/
        outputName: orders.checkout
        title: "Orders API (Checkout)"

  # ── Pricing API ──
  - source: "VTEX - Pricing API.json"
    outputName: pricing

  # ── Search API ──
  - source: "VTEX - Search API.json"
    outputName: search

  # ── SKU Bindings API ──
  - source: "VTEX - SKU Bindings API.json"
    outputName: sku-bindings

  # ── Tracking ──
  - source: "VTEX - Tracking.json"
    outputName: tracking

  # ── VTEX Shipping Network API ──
  - source: "VTEX - VTEX Shipping Network API.json"
    outputName: shipping-network

  # ── Buyer Organizations ──
  - source: "VTEX - Buyer Organizations.json"
    outputName: buyer-organizations

  # ── Pick and Pack ──
  - source: "VTEX - Pick and Pack Last Mile Protocol API.json"
    outputName: pick-and-pack-last-mile

  - source: "VTEX - Pick and Pack Order Changes API.json"
    outputName: pick-and-pack-order-changes
