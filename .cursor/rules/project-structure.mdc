---
alwaysApply: true
---
# OpenAPI Schema Tester - Project Structure

## Purpose

Automate API documentation generation, review, and maintenance using AI agents.

## Directory Structure

### Configuration

- `config.json` - **Central configuration** for all agents
  - `codebase_root` - GitHub URL template
  - `codebases[]` - Array of 49 VTEX APIs with `name` and `documentation` mapping
  - `templates` - OpenAPI and overview templates
  - `examples[]` - Reference documentation
  - `output` - Output path templates for all workflows
- `rating-config.json` - **Rating system configuration**
  - `rating_criteria_weights` - Scoring weights for each criterion
  - `grading_scale` - Score ranges and grade definitions
  - `target_metrics` - Quality thresholds for production schemas
  - `rating_output` - Output path templates

### Templates & Standards

- `templates/VTEX - Template openAPI.jsonc` - OpenAPI schema template
- `templates/Template - API Reference Overview.md` - API overview template

### Input/Output

- `api-repos/` - Source code repositories (cloned from GitHub)
- Root directory - Official VTEX OpenAPI schemas (all `VTEX - *.json` files)
- `examples/` - Reference documentation examples
- `generated-docs/{{yyyy-mm-dd}}-{{model_name}}-Cursor/{{codebase_name}}/` - New documentation
- `reviewed-docs/{{yyyy-mm-dd}}-{{model_name}}-Cursor/{{codebase_name}}/` - Reviewed documentation
- `pr-changes-suggestions/{{yyyy-mm-dd}}-{{model_name}}-Cursor/{{codebase_name}}/` - PR analysis
- `ratings/{{yyyy-mm-dd}}-{{model_name}}-Cursor/` - Schema quality ratings

### Cursor Integration

- `.cursor/commands/` - Executable AI commands
  - `generate-openapi.md` - Generate OpenAPI schema from code
  - `review-openapi.md` - Review existing OpenAPI schema
  - `analyze-pr-changes-openapi.md` - Analyze PR for API changes
  - `rate-openapi.md` - Rate schema quality (compare vs. published + Spectral linting)
  - `spectral.md` - Run Spectral linting and try to fix issues
- `.cursor/rules/` - Background knowledge rules
  - `project-structure.mdc` - Project organization and structure
  - `openapi-standards.mdc` - VTEX OpenAPI 3.0 standards
  - `api-patterns.mdc` - Common API code patterns

## Key Configuration Structure

### Codebases Array

Each entry maps a source repository to its OpenAPI documentation:

```json
{
  "name": "session",
  "documentation": "VTEX - Session Manager API.json"
}
```

### Commands

- `/generate-openapi` - Generate OpenAPI from code
- `/review-openapi` - Review existing OpenAPI
- `/analyze-pr-changes` - Analyze PR for API changes
- `/rate-openapi` - Rate schema quality against published version (7 weighted criteria including Spectral)
- `/spectral` - Run Spectral CLI linting and auto-fix issues
